language: cpp
sudo: required
dist: bionic
compiler:
- gcc
os:
- linux

before_install:
- sudo apt-get update
- sudo apt-get install -y gcc-multilib g++-multilib
- cd $TRAVIS_BUILD_DIR/.. && git clone --recurse-submodules -j8 https://github.com/alliedmodders/sourcemod && cd sourcemod && git checkout $SM_VERSION
- cd $TRAVIS_BUILD_DIR/.. && git clone https://github.com/alliedmodders/metamod-source.git mmsource && cd mmsource && git checkout $MM_VERSION
- cd $TRAVIS_BUILD_DIR/.. && git clone https://github.com/alliedmodders/hl2sdk

script:
- cd $TRAVIS_BUILD_DIR/
- ENGINE=csgo HL2SDK=csgo ./scripts/travisBuild.sh
- ENGINE=left4dead2 HL2SDK=l4d2 ./scripts/travisBuild.sh
- ENGINE=left4dead HL2SDK=l4d ./scripts/travisBuild.sh
- ENGINE=css HL2SDK=css ./scripts/travisBuild.sh
- ENGINE=original HL2SDK=episode1 ./scripts/travisBuild.sh #Not sure about this HL2SDK
# These two are broken, so lets ignore them for now...
# - ENGINE=orangeboxvalve HL2SDK=orangebox ./scripts/travisBuild.sh #Not sure about this HL2SDK
# - ENGINE=orangebox HL2SDK=sdk2013 ./scripts/travisBuild.sh #Not sure about this HL2SDK
- ls -la $TRAVIS_BUILD_DIR/Release

env:
  global:
    - MM_VERSION=1.10-dev
    - SM_VERSION=1.9-dev
